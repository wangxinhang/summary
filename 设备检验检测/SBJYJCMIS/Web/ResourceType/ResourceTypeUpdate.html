<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title></title>
    <script src="../Scripts/jquery-1.11.1.js" type="text/javascript"></script>
    <script src="../SzdwControls/SzdwCommon.js" type="text/javascript"></script>
    <script src="../SzdwControls/SzdwAjaxDataOperate.js" type="text/javascript"></script>
    <link href="../Styles/Query.css" rel="stylesheet" type="text/css" />
    
    <style type="text/css">
        input::-ms-clear{display:none;} 
    </style>
</head>
<body> 
    <form action="">
        <div id="updatePanel">
            <div id="row0" style="margin-bottom:10px;height:24px;">
                <div id="cell00" class="cellDiv">
                    <label for="txtName" class="label">名称:</label>
                    <input id="txtName" type="text" class="textBox2" style="width:280px;"/> 
                </div> 
            </div>
            <div id="row1" style="margin-bottom:10px;height:24px;">
                <div id="cell10" class="cellDiv">
                    <label for="txtMemo" class="label">描述:</label>
                    <textarea id="txtMemo" rows="2" cols="1" class="textBox2" style="width:280px;height:50px;"></textarea>
                </div>                
            </div>  
        </div>
        <div id="buttonPanel">
            <input id="btnCancel" type="button" value="取消" class="button2" style="float:right;"/>
            <input id="btnSave" type="button" value="保存修改" class="keyButton2" style="float:right"/>
        </div>          
    </form>
      
    <script type="text/javascript">
        //#region 全局变量
        var permission = null; 
        var bodyWidth = $(document.body).width();
        var bodyHeight = $(document).height();
        var ml = 18;mt = 10; btnHeight = 32;
        var panelWidth = bodyWidth - ml * 2;
        //#endregion 全局变量

        //#region 网页加载 

        //#region 初始加载
        $(document).ready(function () {
            //设置录入面板
            SetUpdatePanel();

            //设置按钮面板
            SetButtonPanel();

            //按钮事件绑定
            ButtonHandler();

            //窗口调整大小
            $(window).resize(function () {
                RePositionControls();
            });
        });

        function RePositionControls() {
            var pw = parent.document.body.popupWindow;
            if (pw) {
                var p = $("#buttonPanel");
                var ph = pw.pagePanelHeight;
                var h = $(p).outerHeight();
                var x = 0;
                var y = ph - h - 2;
                $(p).css({ "left": x, "top": y });
            }
        }
        //#endregion 初始加载
       
        //#endregion 网页加载  

        //#region 设置录入面板
        function SetUpdatePanel() {
            var q = $("#updatePanel");
            var x = 5;
            var y = 10;
            var w = panelWidth;
            $(q).addClass("queryPanel");
            $(q).css({ "left": x, "top": y});
            $(q).outerWidth(w);
        }
        //#endregion 设置录入面板        

        //#region 设置按钮面板
        function SetButtonPanel() {
            var p = $("#buttonPanel");
            var w = bodyWidth;
            var h = 35;
            var x = 0;
            var y = bodyHeight - h-2;
            $(p).css({ "position": "relative", "left": x, "top": y, "border-top": "0px solid #E2E2E2", "padding": "5px 10px 5px 5px" });
            $(p).outerWidth(w);
            $(p).outerHeight(h);
        }
        //#endregion 设置按钮面板        
        
        //#region 按钮事件
        function ButtonHandler() {            
            //获取弹窗
            var szdwGv = parent.szdwGv;

            var qsJson = $.parseJSON(SzdwCommon.getQueryString("paramJson"));
            $("#txtName").val(qsJson.name);
            $("#txtMemo").val(qsJson.memo);

            $("#btnSave").click(function () {
                var id = qsJson.id;
                var name = $("#txtName").val();
                var memo = $("#txtMemo").val();
                var modifierId = qsJson.modifierId;

                var objDataBind = szdwGv;
                var requestUrl = "ResourceTypeProcess.ashx";
                var paramJson = { id: id, name: name, memo: memo, modifierId: modifierId, MethodName: "ResourceTypeUpdate" };
                SzdwAjaxDataOperate.ajaxUpdate(objDataBind, requestUrl, paramJson, UpdateCallBack);
            });

            $("#btnCancel").click(function () {
                parent.document.body.popupWindow.Hide();
            });
        }

        function UpdateCallBack() {
            parent.document.body.popupWindow.Hide();
        }
        //#endregion 按钮事件        
    </script>
</body>
</html>